<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ultimate GPT Simulator</title>
<style>
body { font-family: Arial; background:#f1f1f1; display:flex; justify-content:center; align-items:center; height:100vh; margin:0;}
#chat-container {background:white; width:400px; max-height:600px; border-radius:10px; display:flex; flex-direction:column; overflow:hidden; box-shadow:0 0 15px rgba(0,0,0,0.2);}
#chat-box {flex:1; padding:10px; overflow-y:auto;}
.user-msg {text-align:right; margin:5px 0; color:white; background:#007bff; display:inline-block; padding:5px 10px; border-radius:15px;}
.bot-msg {text-align:left; margin:5px 0; background:#e4e4e4; display:inline-block; padding:5px 10px; border-radius:15px;}
#input-container {display:flex; border-top:1px solid #ccc;}
#user-input {flex:1; padding:10px; border:none; outline:none;}
#send-btn {padding:10px 15px; border:none; background:#007bff; color:white; cursor:pointer;}
</style>
</head>
<body>
<div id="chat-container">
  <div id="chat-box"></div>
  <div id="input-container">
    <input type="text" id="user-input" placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„ØªÙƒ Ù‡Ù†Ø§...">
    <button id="send-btn">Ø¥Ø±Ø³Ø§Ù„</button>
  </div>
</div>

<script>
// JSON Ø¯Ø§Ø®Ù„ Ø§Ù„ØµÙØ­Ø© Ù…Ø¨Ø§Ø´Ø±Ø©
const responseData = {
  "greetings": {
    "keywords": ["Ù…Ø±Ø­Ø¨Ø§","Ø§Ù‡Ù„Ø§","Ù‡Ø§ÙŠ","Ø§Ù„Ø³Ù„Ø§Ù…","Ø£Ù‡Ù„Ø§ Ø¨Ùƒ"],
    "responses": ["Ø£Ù‡Ù„Ø§Ù‹! ÙƒÙŠÙ ÙƒØ§Ù† ÙŠÙˆÙ…ÙƒØŸ","Ù…Ø±Ø­Ø¨Ø§! Ø³Ø±Ø±Øª Ø¨Ø±Ø¤ÙŠØªÙƒ Ø§Ù„ÙŠÙˆÙ….","Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ! Ø£ØªÙ…Ù†Ù‰ Ø£Ù† ÙŠÙƒÙˆÙ† ÙŠÙˆÙ…Ùƒ Ø¬ÙŠØ¯Ù‹Ø§."],
    "followups": ["Ù‡Ù„ ØªØ±ÙŠØ¯ Ø£Ù† Ù†ØªØ­Ø¯Ø« Ø¹Ù† ÙÙƒØ±Ø© Ø¹Ù„Ù…ÙŠØ©ØŸ","Ù‡Ù„ ØªØ±ØºØ¨ Ø¨Ù…Ù†Ø§Ù‚Ø´Ø© Ù…Ø´Ø±ÙˆØ¹ ØµØºÙŠØ±ØŸ"]
  },
  "farewells": {
    "keywords": ["ÙˆØ¯Ø§Ø¹Ø§","Ø¨Ø§ÙŠ","Ù…Ø¹ Ø§Ù„Ø³Ù„Ø§Ù…Ø©","Ø§Ù„Ù‰ Ø§Ù„Ù„Ù‚Ø§Ø¡"],
    "responses": ["Ø¥Ù„Ù‰ Ø§Ù„Ù„Ù‚Ø§Ø¡! Ù†ØªÙ…Ù†Ù‰ Ù„Ùƒ ÙŠÙˆÙ…Ù‹Ø§ Ø±Ø§Ø¦Ø¹Ù‹Ø§.","ÙˆØ¯Ø§Ø¹Ù‹Ø§! Ø£Ø±Ø§Ùƒ Ù„Ø§Ø­Ù‚Ù‹Ø§."],
    "followups": []
  },
  "questions": {
    "keywords": ["Ù…Ø§","ÙƒÙŠÙ","Ù…ØªÙ‰","Ù„Ù…Ø§Ø°Ø§","Ø£ÙŠÙ†","Ù…Ù†"],
    "responses": ["Ø³Ø¤Ø§Ù„Ùƒ Ù…Ù‡Ù… Ø¬Ø¯Ù‹Ø§ØŒ Ù‡Ù„ ØªØ±ÙŠØ¯ Ù…Ù†ÙŠ Ø§Ù„Ø´Ø±Ø­ Ø¨Ø§Ù„ØªÙØµÙŠÙ„ØŸ","Ø¯Ø¹Ù†Ø§ Ù†Ø­Ù„Ù„ Ø³Ø¤Ø§Ù„Ùƒ Ø®Ø·ÙˆØ© Ø®Ø·ÙˆØ©."],
    "followups": ["ÙŠÙ…ÙƒÙ†Ù†Ø§ Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø¥Ø¬Ø§Ø¨Ø© Ø¹Ù„Ù…ÙŠØ© Ø¯Ù‚ÙŠÙ‚Ø© Ù…Ø¹Ù‹Ø§.","Ù‡Ù„ ØªØ±ÙŠØ¯ Ø£Ù† Ø£Ø´Ø±Ø­ Ù„Ùƒ Ø¨Ø·Ø±ÙŠÙ‚Ø© Ø¨Ø³ÙŠØ·Ø© ÙˆÙ…ÙØµÙ„Ø©ØŸ"]
  },
  "feelings": {
    "positive":["Ø³Ø¹ÙŠØ¯","Ø¬ÙŠØ¯","ØªÙ…Ø§Ù…","Ù…Ù…ØªØ§Ø²","Ù…ÙØ±Ø­","Ù…ØªØ­Ù…Ø³"],
    "negative":["Ø­Ø²ÙŠÙ†","ØªØ¹ÙŠØ³","Ø³ÙŠØ¡","Ù…Ø´ÙƒÙ„Ø©","Ù…ØªØ¹Ø¨","Ù‚Ù„Ù‚"]
  },
  "projects": [
    "Ù‡Ù„ ØªØ±ØºØ¨ ÙÙŠ ØªØ¬Ø±Ø¨Ø© Ù…Ø´Ø±ÙˆØ¹ Ø¹Ù„Ù…ÙŠ ØµØºÙŠØ±ØŸ",
    "ÙŠÙ…ÙƒÙ†Ù†Ø§ Ø§Ù„ØªØ­Ø¯Ø« Ø¹Ù† ÙÙƒØ±Ø© ØªÙ‚Ù†ÙŠØ© Ù…Ø¨ØªÙƒØ±Ø© Ø£Ùˆ ØªØ¬Ø±Ø¨Ø© Ø¬Ø¯ÙŠØ¯Ø©.",
    "Ø¯Ø¹Ù†Ø§ Ù†Ù†Ø§Ù‚Ø´ ÙÙ„Ø³ÙØ© Ø£Ùˆ Ø¹Ù„ÙˆÙ… Ø­Ø¯ÙŠØ«Ø© ÙˆØ£ÙÙƒØ§Ø± Ø¥Ø¨Ø¯Ø§Ø¹ÙŠØ©.",
    "Ù‡Ù„ ØªØ±ÙŠØ¯ Ø£Ù† Ù†Ø¨ØªÙƒØ± Ù…Ø¹Ù‹Ø§ ØªØ¬Ø±Ø¨Ø© Ù…Ù…ØªØ¹Ø© ÙˆÙ…ÙÙŠØ¯Ø©ØŸ"
  ]
};

let conversationHistory = [];

const chatBox = document.getElementById('chat-box');
const userInput = document.getElementById('user-input');
const sendBtn = document.getElementById('send-btn');

// Ø¥Ø¶Ø§ÙØ© Ø¯Ø§Ù„Ø© Ù„ØªÙ‚Ø³ÙŠÙ… Ø§Ù„Ø¬Ù…Ù„Ø© Ø¥Ù„Ù‰ ÙƒÙ„Ù…Ø§Øª Ø¹Ø±Ø¨ÙŠØ© ÙˆØ¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©
function getWords(text){
    return text
        .toLowerCase()
        .replace(/[^\w\u0600-\u06FF\s]/g,'') // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ø±Ù…ÙˆØ² Ø¨Ø§Ø³ØªØ«Ù†Ø§Ø¡ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©
        .split(/\s+/)
        .filter(w=>w.length>0); // ØªØ¬Ø§Ù‡Ù„ Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø§Ù„ÙØ§Ø±ØºØ©
}

function generateResponse(userMsg){
    const words = getWords(userMsg);
    let response = "";

    for(const category in responseData){
        if(category==="feelings" || category==="projects") continue;
        const data = responseData[category];

        // ØªØ­Ù‚Ù‚ Ø¥Ø°Ø§ Ø£ÙŠ ÙƒÙ„Ù…Ø© Ù…ÙØªØ§Ø­ÙŠØ© Ù…ÙˆØ¬ÙˆØ¯Ø© ÙÙŠ ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
        const matched = data.keywords.some(keyword => {
            const key = keyword.toLowerCase().trim();
            return words.includes(key); 
        });

        if(matched){
            response = data.responses[Math.floor(Math.random()*data.responses.length)] || "";
            if(data.followups && data.followups.length && Math.random()<0.7){
                const follow = data.followups[Math.floor(Math.random()*data.followups.length)];
                response += " " + follow;
            }
            break;
        }
    }

    if(!response) response = "Ø¹Ø°Ø±Ø§Ù‹ØŒ Ù„Ù… Ø£ÙÙ‡Ù… Ø³Ø¤Ø§Ù„Ùƒ. ðŸ¤”";

    // Ø§Ù‚ØªØ±Ø§Ø­ Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ Ø£Ø­ÙŠØ§Ù†Ù‹Ø§
    if(responseData.projects.length && Math.random()<0.5){
        const project = responseData.projects[Math.floor(Math.random()*responseData.projects.length)];
        response += " " + project;
    }

    conversationHistory.push({user:userMsg, bot:response});
    return response;
}

function appendMessage(sender,message){
    const msgDiv = document.createElement('div');
    msgDiv.className = sender==='user'?'user-msg':'bot-msg';
    msgDiv.textContent = message;
    chatBox.appendChild(msgDiv);
    chatBox.scrollTop = chatBox.scrollHeight;
}

sendBtn.addEventListener('click', ()=>{
    const userMsg = userInput.value.trim();
    if(!userMsg) return;
    appendMessage('user', userMsg);
    appendMessage('bot', generateResponse(userMsg));
    userInput.value='';
});

userInput.addEventListener('keypress', e=>{
    if(e.key==='Enter') sendBtn.click();
});
</script>
</body>
</html>
